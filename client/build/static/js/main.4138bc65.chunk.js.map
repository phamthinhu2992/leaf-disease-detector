{"version":3,"sources":["components/ImageUploader.tsx","components/CropManagement.tsx","components/Chatbot.tsx","App.tsx","index.tsx"],"names":["styles","container","minHeight","background","padding","fontFamily","header","textAlign","color","marginBottom","content","maxWidth","margin","borderRadius","boxShadow","section","uploadBox","position","border","cursor","transition","fileInput","display","uploadLabel","fontSize","previewBox","marginTop","previewImage","maxHeight","optionsGrid","gridTemplateColumns","gap","optionGroup","flexDirection","select","button","width","fontWeight","buttonSecondary","errorBox","borderLeft","resultBox","predictionCard","predictionTitle","confidence","confidenceBadge","infoGrid","infoCard","infoLabel","analysisBox","analysisText","lineHeight","whiteSpace","wordWrap","overflow","detailsGrid","detailCard","detailsList","paddingLeft","ImageUploader","selectedImage","setSelectedImage","useState","preview","setPreview","result","setResult","loading","setLoading","error","setError","plantPart","setPlantPart","environmentalCondition","setEnvironmentalCondition","urgencyLevel","setUrgencyLevel","diseaseHistory","setDiseaseHistory","treatmentAttempted","setTreatmentAttempted","_jsxs","style","children","_jsx","type","accept","onChange","event","target","files","file","reader","FileReader","onloadend","readAsDataURL","id","htmlFor","name","src","alt","value","e","onClick","async","formData","FormData","append","_data$prediction","_data$prediction2","console","log","response","fetch","method","body","status","statusText","ok","errorText","text","Error","concat","data","json","prediction","err","errorMsg","message","disabled","_objectSpread","opacity","toFixed","backgroundColor","processingTime","imageInfo","size","modelInfo","modelsUsed","totalModels","Date","timestamp","toLocaleString","detailedAnalysisFormatted","analysisDetails","pixelAnalysis","greenPixels","brownPixels","redPixels","yellowPixels","blackPixels","diseaseMarkers","brownSpots","redBurning","yellowingAreas","blackNecrosis","leafEdgeDamage","anomalyScore","severity","spatialPattern","leafHealthScore","CropManagement","crops","setCrops","selectedCrop","setSelectedCrop","cropStats","setCropStats","showForm","setShowForm","userId","setFormData","crop_name","crop_type","location","area_hectare","planting_date","toISOString","split","variety","useEffect","fetchCrops","res","success","className","length","onSubmit","preventDefault","headers","JSON","stringify","alert","placeholder","required","min","step","parseFloat","map","crop","detailRes","historyRes","statsRes","Promise","all","cropId","detail","history","stats","fetchCropDetail","_Fragment","window","confirm","handleDeleteCrop","total_diseases","resolved_count","avg_severity","toLocaleDateString","record","disease_severity","disease_name","resolved","detected_date","confidence_score","treatment_given","Chatbot","_ref","cropType","diseaseDetected","messages","setMessages","input","setInput","suggestions","setSuggestions","isOpen","setIsOpen","messagesEndRef","useRef","fetchSuggestions","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","question","trim","userMsg","now","toString","prev","botMsg","title","msg","undefined","ref","suggestion","idx","handleSuggestionClick","App","activeTab","setActiveTab","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4138bc65.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\ninterface PredictionResult {\n  success: boolean;\n  prediction: {\n    prediction: string;\n    confidence: number;\n    originalPrediction: string;\n    source: string;\n    modelInfo?: {\n      name: string;\n      version: string;\n      modelsUsed: number;\n      totalModels: number;\n    };\n    processingTime: number;\n    detailedAnalysisReport?: any;\n    detailedAnalysisFormatted?: string;\n  };\n  imageInfo?: {\n    filename: string;\n    size: number;\n    contentType: string;\n  };\n  timestamp: string;\n}\n\nconst ImageUploader: React.FC = () => {\n  const [selectedImage, setSelectedImage] = useState<File | null>(null);\n  const [preview, setPreview] = useState<string | null>(null);\n  const [result, setResult] = useState<PredictionResult | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Analysis customization options\n  const [plantPart, setPlantPart] = useState<string>('leaves');\n  const [environmentalCondition, setEnvironmentalCondition] = useState<string>('normal');\n  const [urgencyLevel, setUrgencyLevel] = useState<string>('normal');\n  const [diseaseHistory, setDiseaseHistory] = useState<string>('none');\n  const [treatmentAttempted, setTreatmentAttempted] = useState<string>('none');\n\n  const handleImageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      const file = event.target.files[0];\n      setSelectedImage(file);\n\n      // Create preview\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n\n      setResult(null);\n      setError(null);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedImage) {\n      setError('Please select an image first');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('image', selectedImage);\n    formData.append('plantPart', plantPart);\n    formData.append('environmentalCondition', environmentalCondition);\n    formData.append('urgencyLevel', urgencyLevel);\n    formData.append('diseaseHistory', diseaseHistory);\n    formData.append('treatmentAttempted', treatmentAttempted);\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      console.log('ğŸš€ Sending prediction request...');\n      const response = await fetch('/api/predict', {\n        method: 'POST',\n        body: formData,\n      });\n\n      console.log('Response status:', response.status, response.statusText);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response:', errorText);\n        throw new Error(`Failed to analyze image: ${response.statusText} - ${errorText}`);\n      }\n\n      const data = await response.json();\n      console.log('âœ… Raw API response:', data);\n      console.log('ğŸ“Š Prediction object:', data.prediction);\n      console.log('ğŸ¯ Disease name:', data.prediction?.prediction);\n      console.log('ğŸ“ˆ Confidence:', data.prediction?.confidence);\n      setResult(data);\n    } catch (err) {\n      const errorMsg = err instanceof Error ? err.message : 'Unknown error';\n      console.error('âŒ Error:', errorMsg);\n      setError(errorMsg);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={styles.container}>\n      <div style={styles.header}>\n        <h1>ğŸŒ¿ Há»‡ Thá»‘ng Nháº­n Diá»‡n Bá»‡nh LÃ¡ CÃ¢y</h1>\n        <p>Sá»­ dá»¥ng AI tiÃªn tiáº¿n Ä‘á»ƒ cháº©n Ä‘oÃ¡n bá»‡nh cÃ¢y trá»“ng</p>\n      </div>\n\n      <div style={styles.content}>\n        {/* Upload Section */}\n        <div style={styles.section}>\n          <h2>ğŸ“¸ Táº£i áº¢nh LÃ¡ CÃ¢y</h2>\n\n          <div style={styles.uploadBox}>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageChange}\n              style={styles.fileInput}\n              id=\"imageInput\"\n            />\n            <label htmlFor=\"imageInput\" style={styles.uploadLabel}>\n              {selectedImage ? 'âœ… áº¢nh Ä‘Ã£ chá»n: ' + selectedImage.name : 'ğŸ–¼ï¸ Nháº¥p Ä‘á»ƒ chá»n áº£nh'}\n            </label>\n          </div>\n\n          {preview && (\n            <div style={styles.previewBox}>\n              <img src={preview} alt=\"Preview\" style={styles.previewImage} />\n            </div>\n          )}\n        </div>\n\n        {/* Options Section */}\n        {selectedImage && (\n          <div style={styles.section}>\n            <h2>âš™ï¸ TÃ¹y Chá»‰nh PhÃ¢n TÃ­ch</h2>\n\n            <div style={styles.optionsGrid}>\n              <div style={styles.optionGroup}>\n                <label>ğŸŒ± Bá»™ Pháº­n CÃ¢y:</label>\n                <select\n                  value={plantPart}\n                  onChange={(e) => setPlantPart(e.target.value)}\n                  style={styles.select}\n                >\n                  <option value=\"leaves\">LÃ¡</option>\n                  <option value=\"stem\">ThÃ¢n</option>\n                  <option value=\"root\">Rá»…</option>\n                  <option value=\"flower\">Hoa</option>\n                  <option value=\"fruit\">Quáº£</option>\n                  <option value=\"whole\">ToÃ n cÃ¢y</option>\n                </select>\n              </div>\n\n              <div style={styles.optionGroup}>\n                <label>â˜€ï¸ Äiá»u Kiá»‡n MÃ´i TrÆ°á»ng:</label>\n                <select\n                  value={environmentalCondition}\n                  onChange={(e) => setEnvironmentalCondition(e.target.value)}\n                  style={styles.select}\n                >\n                  <option value=\"normal\">BÃ¬nh thÆ°á»ng</option>\n                  <option value=\"humid\">áº¨m</option>\n                  <option value=\"dry\">KhÃ´</option>\n                  <option value=\"hot\">NÃ³ng</option>\n                  <option value=\"cold\">Láº¡nh</option>\n                </select>\n              </div>\n\n              <div style={styles.optionGroup}>\n                <label>â° Má»©c Äá»™ Kháº©n Cáº¥p:</label>\n                <select\n                  value={urgencyLevel}\n                  onChange={(e) => setUrgencyLevel(e.target.value)}\n                  style={styles.select}\n                >\n                  <option value=\"low\">Tháº¥p</option>\n                  <option value=\"normal\">BÃ¬nh thÆ°á»ng</option>\n                  <option value=\"urgent\">Kháº©n cáº¥p</option>\n                  <option value=\"critical\">Ráº¥t kháº©n cáº¥p</option>\n                </select>\n              </div>\n\n              <div style={styles.optionGroup}>\n                <label>ğŸ“œ Tiá»n Sá»­ Bá»‡nh:</label>\n                <select\n                  value={diseaseHistory}\n                  onChange={(e) => setDiseaseHistory(e.target.value)}\n                  style={styles.select}\n                >\n                  <option value=\"none\">KhÃ´ng cÃ³</option>\n                  <option value=\"past\">Tá»«ng cÃ³</option>\n                  <option value=\"current\">Äang cÃ³</option>\n                  <option value=\"recurring\">TÃ¡i phÃ¡t</option>\n                </select>\n              </div>\n\n              <div style={styles.optionGroup}>\n                <label>ğŸ’Š ÄÃ£ Äiá»u Trá»‹:</label>\n                <select\n                  value={treatmentAttempted}\n                  onChange={(e) => setTreatmentAttempted(e.target.value)}\n                  style={styles.select}\n                >\n                  <option value=\"none\">ChÆ°a Ä‘iá»u trá»‹</option>\n                  <option value=\"organic\">CÃ³ cÆ¡</option>\n                  <option value=\"chemical\">HÃ³a cháº¥t</option>\n                  <option value=\"both\">Cáº£ hai</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Upload Button */}\n        {selectedImage && (\n          <button\n            onClick={handleUpload}\n            disabled={loading}\n            style={{ ...styles.button, opacity: loading ? 0.6 : 1 }}\n          >\n            {loading ? 'â³ Äang phÃ¢n tÃ­ch...' : 'ğŸš€ PhÃ¢n TÃ­ch áº¢nh'}\n          </button>\n        )}\n\n        {/* Error Section */}\n        {error && (\n          <div style={styles.errorBox}>\n            <h3>âŒ Lá»—i:</h3>\n            <p>{error}</p>\n          </div>\n        )}\n\n        {/* Results Section */}\n        {result && (\n          <div style={styles.section}>\n            <h2>ğŸ“Š Káº¿t Quáº£ PhÃ¢n TÃ­ch</h2>\n\n            <div style={styles.resultBox}>\n              <div style={styles.predictionCard}>\n                <h3 style={styles.predictionTitle}>\n                  ğŸ¯ Cháº©n ÄoÃ¡n: {result.prediction.prediction}\n                </h3>\n                <p style={styles.confidence}>\n                  Äá»™ tin cáº­y: <strong>{(result.prediction.confidence * 100).toFixed(1)}%</strong>\n                </p>\n                <div style={{\n                  ...styles.confidenceBadge,\n                  backgroundColor: result.prediction.confidence >= 0.9 ? '#10b981' :\n                    result.prediction.confidence >= 0.7 ? '#f59e0b' : '#ef4444'\n                }}>\n                  {result.prediction.confidence >= 0.9 ? 'ğŸ‰ Ráº¥t chÃ­nh xÃ¡c' :\n                    result.prediction.confidence >= 0.7 ? 'ğŸ‘ KhÃ¡ chÃ­nh xÃ¡c' : 'âš ï¸ Cáº§n kiá»ƒm tra thÃªm'}\n                </div>\n              </div>\n\n              <div style={styles.infoGrid}>\n                <div style={styles.infoCard}>\n                  <span style={styles.infoLabel}>â±ï¸ Thá»i gian xá»­ lÃ½:</span>\n                  <span>{result.prediction.processingTime} ms</span>\n                </div>\n                <div style={styles.infoCard}>\n                  <span style={styles.infoLabel}>ğŸ“ KÃ­ch thÆ°á»›c:</span>\n                  <span>{result.imageInfo ? (result.imageInfo.size / 1024).toFixed(2) : 'N/A'} KB</span>\n                </div>\n                {result.prediction.modelInfo && (\n                  <div style={styles.infoCard}>\n                    <span style={styles.infoLabel}>ğŸ¤– AI Models:</span>\n                    <span>{result.prediction.modelInfo.modelsUsed}/{result.prediction.modelInfo.totalModels}</span>\n                  </div>\n                )}\n                <div style={styles.infoCard}>\n                  <span style={styles.infoLabel}>ğŸ• Thá»i gian:</span>\n                  <span>{new Date(result.timestamp).toLocaleString('vi-VN')}</span>\n                </div>\n              </div>\n\n              {result.prediction.detailedAnalysisFormatted && (\n                <div style={styles.analysisBox}>\n                  <h3>ğŸ“‹ PhÃ¢n TÃ­ch Chi Tiáº¿t</h3>\n                  <pre style={styles.analysisText}>\n                    {result.prediction.detailedAnalysisFormatted}\n                  </pre>\n                </div>\n              )}\n\n              {(result.prediction as any).analysisDetails && (\n                <div style={styles.analysisBox}>\n                  <h3>ğŸ”¬ Chi Tiáº¿t PhÃ¢n TÃ­ch Pixel</h3>\n                  <div style={styles.detailsGrid}>\n                    {(result.prediction as any).analysisDetails.pixelAnalysis && (\n                      <div style={styles.detailCard}>\n                        <h4>ğŸ¨ PhÃ¢n TÃ­ch MÃ u Sáº¯c:</h4>\n                        <ul style={styles.detailsList}>\n                          <li>ğŸ’š Green: {(result.prediction as any).analysisDetails.pixelAnalysis.greenPixels || 0}</li>\n                          <li>ğŸŸ¤ Brown: {(result.prediction as any).analysisDetails.pixelAnalysis.brownPixels || 0}</li>\n                          <li>ğŸ”´ Red: {(result.prediction as any).analysisDetails.pixelAnalysis.redPixels || 0}</li>\n                          <li>ğŸŸ¡ Yellow: {(result.prediction as any).analysisDetails.pixelAnalysis.yellowPixels || 0}</li>\n                          <li>âš« Black: {(result.prediction as any).analysisDetails.pixelAnalysis.blackPixels || 0}</li>\n                        </ul>\n                      </div>\n                    )}\n                    {(result.prediction as any).analysisDetails.diseaseMarkers && (\n                      <div style={styles.detailCard}>\n                        <h4>ğŸ¦  Dáº¥u Hiá»‡u Bá»‡nh:</h4>\n                        <ul style={styles.detailsList}>\n                          <li>ğŸŸ¤ Brown Spots: {(result.prediction as any).analysisDetails.diseaseMarkers.brownSpots || 0}</li>\n                          <li>ğŸ”´ Red Burning: {(result.prediction as any).analysisDetails.diseaseMarkers.redBurning || 0}</li>\n                          <li>ğŸŸ¡ Yellowing: {(result.prediction as any).analysisDetails.diseaseMarkers.yellowingAreas || 0}</li>\n                          <li>âš« Black Necrosis: {(result.prediction as any).analysisDetails.diseaseMarkers.blackNecrosis || 0}</li>\n                          <li>ğŸ”ª Edge Damage: {(result.prediction as any).analysisDetails.diseaseMarkers.leafEdgeDamage || 0}</li>\n                        </ul>\n                      </div>\n                    )}\n                    <div style={styles.detailCard}>\n                      <h4>ğŸ“Š Chá»‰ Sá»‘ Sá»©c Khá»e:</h4>\n                      <ul style={styles.detailsList}>\n                        <li>âš ï¸ Anomaly Score: {((result.prediction as any).analysisDetails.anomalyScore * 100).toFixed(1)}%</li>\n                        <li>ğŸ¯ Severity: {(result.prediction as any).analysisDetails.severity || 'N/A'}</li>\n                        <li>ğŸ“ Pattern: {(result.prediction as any).analysisDetails.spatialPattern || 'N/A'}</li>\n                        <li>ğŸ’š Health Score: {((result.prediction as any).analysisDetails.leafHealthScore * 100).toFixed(1)}%</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <button\n              onClick={() => {\n                setSelectedImage(null);\n                setPreview(null);\n                setResult(null);\n                setError(null);\n              }}\n              style={styles.buttonSecondary}\n            >\n              ğŸ”„ PhÃ¢n TÃ­ch áº¢nh KhÃ¡c\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n  container: {\n    minHeight: '100vh',\n    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n    padding: '20px',\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n  },\n  header: {\n    textAlign: 'center',\n    color: 'white',\n    marginBottom: '30px',\n  },\n  content: {\n    maxWidth: '900px',\n    margin: '0 auto',\n    background: 'white',\n    borderRadius: '20px',\n    padding: '40px',\n    boxShadow: '0 20px 60px rgba(0,0,0,0.3)',\n  },\n  section: {\n    marginBottom: '30px',\n  },\n  uploadBox: {\n    position: 'relative',\n    border: '2px dashed #cbd5e1',\n    borderRadius: '12px',\n    padding: '20px',\n    textAlign: 'center',\n    cursor: 'pointer',\n    transition: 'all 0.3s',\n    background: '#f8fafc',\n  },\n  fileInput: {\n    display: 'none',\n  },\n  uploadLabel: {\n    display: 'block',\n    cursor: 'pointer',\n    padding: '20px',\n    fontSize: '16px',\n    color: '#475569',\n  },\n  previewBox: {\n    marginTop: '20px',\n    textAlign: 'center',\n  },\n  previewImage: {\n    maxWidth: '100%',\n    maxHeight: '300px',\n    borderRadius: '12px',\n    boxShadow: '0 4px 12px rgba(0,0,0,0.1)',\n  },\n  optionsGrid: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    gap: '15px',\n    marginBottom: '20px',\n  },\n  optionGroup: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '8px',\n  },\n  select: {\n    padding: '10px',\n    borderRadius: '8px',\n    border: '1px solid #cbd5e1',\n    fontSize: '14px',\n    cursor: 'pointer',\n    background: 'white',\n  },\n  button: {\n    width: '100%',\n    padding: '15px',\n    fontSize: '16px',\n    fontWeight: 'bold',\n    color: 'white',\n    background: 'linear-gradient(45deg, #667eea, #764ba2)',\n    border: 'none',\n    borderRadius: '12px',\n    cursor: 'pointer',\n    transition: 'transform 0.2s',\n    marginBottom: '20px',\n  },\n  buttonSecondary: {\n    width: '100%',\n    padding: '12px',\n    fontSize: '14px',\n    fontWeight: 'bold',\n    color: 'white',\n    background: '#10b981',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    marginTop: '15px',\n  },\n  errorBox: {\n    background: '#fee2e2',\n    color: '#991b1b',\n    padding: '15px',\n    borderRadius: '8px',\n    marginBottom: '20px',\n    borderLeft: '4px solid #dc2626',\n  },\n  resultBox: {\n    background: '#f1f5f9',\n    padding: '20px',\n    borderRadius: '12px',\n    marginBottom: '20px',\n  },\n  predictionCard: {\n    background: 'white',\n    padding: '20px',\n    borderRadius: '12px',\n    marginBottom: '20px',\n    borderLeft: '5px solid #667eea',\n  },\n  predictionTitle: {\n    fontSize: '24px',\n    margin: '0 0 10px 0',\n    color: '#1e293b',\n  },\n  confidence: {\n    fontSize: '18px',\n    margin: '10px 0',\n    color: '#475569',\n  },\n  confidenceBadge: {\n    display: 'inline-block',\n    padding: '8px 16px',\n    borderRadius: '20px',\n    color: 'white',\n    fontWeight: 'bold',\n    marginTop: '10px',\n  },\n  infoGrid: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    gap: '12px',\n    marginBottom: '20px',\n  },\n  infoCard: {\n    background: 'white',\n    padding: '15px',\n    borderRadius: '8px',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '5px',\n  },\n  infoLabel: {\n    fontWeight: 'bold',\n    color: '#475569',\n    fontSize: '14px',\n  },\n  analysisBox: {\n    background: 'white',\n    padding: '15px',\n    borderRadius: '8px',\n    marginBottom: '15px',\n  },\n  analysisText: {\n    fontSize: '12px',\n    lineHeight: '1.5',\n    whiteSpace: 'pre-wrap',\n    wordWrap: 'break-word',\n    maxHeight: '300px',\n    overflow: 'auto',\n    background: '#f8fafc',\n    padding: '12px',\n    borderRadius: '6px',\n  },\n  detailsGrid: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr 1fr',\n    gap: '15px',\n    marginTop: '12px',\n  },\n  detailCard: {\n    background: '#f8fafc',\n    padding: '12px',\n    borderRadius: '8px',\n    border: '1px solid #e2e8f0',\n  },\n  detailsList: {\n    margin: '8px 0',\n    paddingLeft: '20px',\n    fontSize: '13px',\n    lineHeight: '1.6',\n  },\n};\n\nexport default ImageUploader;","/**\r\n * CropManagement Component - Quáº£n lÃ½ há»“ sÆ¡ cÃ¢y trá»“ng\r\n * Features: Create crop, view list, disease history, statistics\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport '../styles/cropManagement.css';\r\n\r\ninterface Crop {\r\n    id: number;\r\n    crop_name: string;\r\n    crop_type: string;\r\n    location: string;\r\n    area_hectare: number;\r\n    planting_date: string;\r\n    variety: string;\r\n    latitude?: number;\r\n    longitude?: number;\r\n    created_at: string;\r\n}\r\n\r\ninterface DiseaseRecord {\r\n    id: number;\r\n    crop_id: number;\r\n    disease_name: string;\r\n    disease_severity: string;\r\n    confidence_score: number;\r\n    detected_date: string;\r\n    treatment_given?: string;\r\n    resolved: boolean;\r\n}\r\n\r\ninterface CropStats {\r\n    total_crops: number;\r\n    total_diseases: number;\r\n    avg_severity: string;\r\n    resolved_count: number;\r\n}\r\n\r\nconst CropManagement: React.FC = () => {\r\n    const [crops, setCrops] = useState<Crop[]>([]);\r\n    const [selectedCrop, setSelectedCrop] = useState<Crop | null>(null);\r\n    const [diseaseHistory, setDiseaseHistory] = useState<DiseaseRecord[]>([]);\r\n    const [cropStats, setCropStats] = useState<CropStats | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [userId] = useState(1); // Demo: hardcoded user ID\r\n\r\n    // Form state\r\n    const [formData, setFormData] = useState({\r\n        crop_name: '',\r\n        crop_type: 'tomato',\r\n        location: 'HÃ  Ná»™i',\r\n        area_hectare: 1,\r\n        planting_date: new Date().toISOString().split('T')[0],\r\n        variety: 'F1'\r\n    });\r\n\r\n    // Load crops on mount\r\n    useEffect(() => {\r\n        fetchCrops();\r\n    }, []);\r\n\r\n    const fetchCrops = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch(`/api/crops/user/${userId}`);\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setCrops(data.data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching crops:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchCropDetail = async (cropId: number) => {\r\n        setLoading(true);\r\n        try {\r\n            const [detailRes, historyRes, statsRes] = await Promise.all([\r\n                fetch(`/api/crops/${cropId}`),\r\n                fetch(`/api/crops/${cropId}/history`),\r\n                fetch(`/api/crops/${cropId}/statistics`)\r\n            ]);\r\n\r\n            const detail = await detailRes.json();\r\n            const history = await historyRes.json();\r\n            const stats = await statsRes.json();\r\n\r\n            if (detail.success) {\r\n                setSelectedCrop(detail.data);\r\n            }\r\n            if (history.success) {\r\n                setDiseaseHistory(history.data);\r\n            }\r\n            if (stats.success) {\r\n                setCropStats(stats.data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching crop details:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateCrop = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/crops', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    userId,\r\n                    ...formData\r\n                })\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                alert('âœ… Táº¡o cÃ¢y trá»“ng thÃ nh cÃ´ng!');\r\n                setFormData({\r\n                    crop_name: '',\r\n                    crop_type: 'tomato',\r\n                    location: 'HÃ  Ná»™i',\r\n                    area_hectare: 1,\r\n                    planting_date: new Date().toISOString().split('T')[0],\r\n                    variety: 'F1'\r\n                });\r\n                setShowForm(false);\r\n                fetchCrops();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error creating crop:', error);\r\n            alert('âŒ Lá»—i khi táº¡o cÃ¢y trá»“ng');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteCrop = async (cropId: number) => {\r\n        if (!window.confirm('Báº¡n cháº¯c cháº¯n muá»‘n xÃ³a cÃ¢y nÃ y?')) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch(`/api/crops/${cropId}`, { method: 'DELETE' });\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                alert('âœ… XÃ³a cÃ¢y thÃ nh cÃ´ng!');\r\n                setSelectedCrop(null);\r\n                fetchCrops();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting crop:', error);\r\n            alert('âŒ Lá»—i khi xÃ³a cÃ¢y');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"crop-management\">\r\n            <h2>ğŸŒ± Quáº£n lÃ½ cÃ¢y trá»“ng</h2>\r\n\r\n            <div className=\"crop-container\">\r\n                {/* Left: Crop List */}\r\n                <div className=\"crop-list-section\">\r\n                    <div className=\"section-header\">\r\n                        <h3>Danh sÃ¡ch cÃ¢y ({crops.length})</h3>\r\n                        <button\r\n                            className=\"btn-primary\"\r\n                            onClick={() => setShowForm(!showForm)}\r\n                            disabled={loading}\r\n                        >\r\n                            {showForm ? 'âŒ Há»§y' : 'â• ThÃªm cÃ¢y'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {showForm && (\r\n                        <form className=\"crop-form\" onSubmit={handleCreateCrop}>\r\n                            <h4>Táº¡o há»“ sÆ¡ cÃ¢y má»›i</h4>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>TÃªn cÃ¢y:</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.crop_name}\r\n                                    onChange={(e) =>\r\n                                        setFormData({ ...formData, crop_name: e.target.value })\r\n                                    }\r\n                                    placeholder=\"VD: CÃ  chua #1\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Loáº¡i cÃ¢y:</label>\r\n                                <select\r\n                                    value={formData.crop_type}\r\n                                    onChange={(e) =>\r\n                                        setFormData({ ...formData, crop_type: e.target.value })\r\n                                    }\r\n                                >\r\n                                    <option value=\"tomato\">CÃ  chua</option>\r\n                                    <option value=\"pepper\">TiÃªu</option>\r\n                                    <option value=\"potato\">Khoai tÃ¢y</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Vá»‹ trÃ­:</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.location}\r\n                                    onChange={(e) =>\r\n                                        setFormData({ ...formData, location: e.target.value })\r\n                                    }\r\n                                    placeholder=\"VD: HÃ  Ná»™i\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>Diá»‡n tÃ­ch (hecta):</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    min=\"0.1\"\r\n                                    step=\"0.1\"\r\n                                    value={formData.area_hectare}\r\n                                    onChange={(e) =>\r\n                                        setFormData({\r\n                                            ...formData,\r\n                                            area_hectare: parseFloat(e.target.value)\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <label>NgÃ y trá»“ng:</label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={formData.planting_date}\r\n                                    onChange={(e) =>\r\n                                        setFormData({\r\n                                            ...formData,\r\n                                            planting_date: e.target.value\r\n                                        })\r\n                                    }\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"btn-success\"\r\n                                disabled={loading}\r\n                            >\r\n                                {loading ? 'â³ Äang lÆ°u...' : 'âœ… Táº¡o cÃ¢y'}\r\n                            </button>\r\n                        </form>\r\n                    )}\r\n\r\n                    <div className=\"crop-list\">\r\n                        {loading && crops.length === 0 ? (\r\n                            <div className=\"loading\">â³ Äang táº£i...</div>\r\n                        ) : crops.length === 0 ? (\r\n                            <div className=\"empty\">\r\n                                <p>ğŸ“­ ChÆ°a cÃ³ cÃ¢y nÃ o</p>\r\n                                <p className=\"hint\">Nháº¥n \"ThÃªm cÃ¢y\" Ä‘á»ƒ táº¡o há»“ sÆ¡ má»›i</p>\r\n                            </div>\r\n                        ) : (\r\n                            crops.map((crop) => (\r\n                                <div\r\n                                    key={crop.id}\r\n                                    className={`crop-item ${selectedCrop?.id === crop.id ? 'active' : ''}`}\r\n                                    onClick={() => fetchCropDetail(crop.id)}\r\n                                >\r\n                                    <div className=\"crop-info\">\r\n                                        <p className=\"crop-name\">ğŸŒ± {crop.crop_name}</p>\r\n                                        <p className=\"crop-type\">Loáº¡i: {crop.crop_type}</p>\r\n                                        <p className=\"crop-location\">ğŸ“ {crop.location}</p>\r\n                                        <p className=\"crop-area\">{crop.area_hectare} ha</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right: Crop Details */}\r\n                <div className=\"crop-details-section\">\r\n                    {selectedCrop ? (\r\n                        <>\r\n                            <div className=\"crop-header\">\r\n                                <h3>{selectedCrop.crop_name}</h3>\r\n                                <button\r\n                                    className=\"btn-danger\"\r\n                                    onClick={() => handleDeleteCrop(selectedCrop.id)}\r\n                                    disabled={loading}\r\n                                >\r\n                                    ğŸ—‘ï¸ XÃ³a\r\n                                </button>\r\n                            </div>\r\n\r\n                            {cropStats && (\r\n                                <div className=\"crop-stats\">\r\n                                    <div className=\"stat-box\">\r\n                                        <span className=\"stat-label\">Bá»‡nh phÃ¡t hiá»‡n:</span>\r\n                                        <span className=\"stat-value\">{cropStats.total_diseases}</span>\r\n                                    </div>\r\n                                    <div className=\"stat-box\">\r\n                                        <span className=\"stat-label\">ÄÃ£ khá»i:</span>\r\n                                        <span className=\"stat-value\">{cropStats.resolved_count}</span>\r\n                                    </div>\r\n                                    <div className=\"stat-box\">\r\n                                        <span className=\"stat-label\">Má»©c Ä‘á»™ tb:</span>\r\n                                        <span className=\"stat-value\">{cropStats.avg_severity}</span>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"crop-info-detail\">\r\n                                <p>\r\n                                    <strong>Loáº¡i cÃ¢y:</strong> {selectedCrop.crop_type}\r\n                                </p>\r\n                                <p>\r\n                                    <strong>Vá»‹ trÃ­:</strong> {selectedCrop.location}\r\n                                </p>\r\n                                <p>\r\n                                    <strong>Diá»‡n tÃ­ch:</strong> {selectedCrop.area_hectare} ha\r\n                                </p>\r\n                                <p>\r\n                                    <strong>NgÃ y trá»“ng:</strong>{' '}\r\n                                    {new Date(selectedCrop.planting_date).toLocaleDateString(\r\n                                        'vi-VN'\r\n                                    )}\r\n                                </p>\r\n                                <p>\r\n                                    <strong>Giá»‘ng:</strong> {selectedCrop.variety || 'N/A'}\r\n                                </p>\r\n                            </div>\r\n\r\n                            <h4>ğŸ“‹ Lá»‹ch sá»­ bá»‡nh</h4>\r\n                            <div className=\"disease-history\">\r\n                                {loading ? (\r\n                                    <div className=\"loading\">â³ Äang táº£i...</div>\r\n                                ) : diseaseHistory.length === 0 ? (\r\n                                    <div className=\"empty\">\r\n                                        <p>âœ… KhÃ´ng cÃ³ bá»‡nh phÃ¡t hiá»‡n</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    diseaseHistory.map((record) => (\r\n                                        <div\r\n                                            key={record.id}\r\n                                            className={`disease-record severity-${record.disease_severity}`}\r\n                                        >\r\n                                            <p className=\"disease-name\">\r\n                                                <strong>{record.disease_name}</strong>\r\n                                                {record.resolved && (\r\n                                                    <span className=\"badge-resolved\">âœ… ÄÃ£ khá»i</span>\r\n                                                )}\r\n                                            </p>\r\n                                            <p className=\"disease-date\">\r\n                                                ğŸ“… {new Date(record.detected_date).toLocaleDateString(\r\n                                                    'vi-VN'\r\n                                                )}\r\n                                            </p>\r\n                                            <p className=\"disease-severity\">\r\n                                                Má»©c Ä‘á»™: {record.disease_severity} | Äá»™ tin cáº­y:{' '}\r\n                                                {(record.confidence_score * 100).toFixed(1)}%\r\n                                            </p>\r\n                                            {record.treatment_given && (\r\n                                                <p className=\"treatment\">\r\n                                                    ğŸ’Š {record.treatment_given}\r\n                                                </p>\r\n                                            )}\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"no-selection\">\r\n                            <p>ğŸ‘ˆ Chá»n cÃ¢y trá»“ng Ä‘á»ƒ xem chi tiáº¿t</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CropManagement;\r\n","/**\r\n * Chatbot Widget Component - Há»i-Ä‘Ã¡p chuyÃªn gia AI\r\n * Real-time expert advice on crop management and disease control\r\n */\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport '../styles/chatbot.css';\r\n\r\ninterface ChatMessage {\r\n    id: string;\r\n    type: 'user' | 'bot';\r\n    content: string;\r\n    timestamp: Date;\r\n    confidence?: number;\r\n}\r\n\r\ninterface ChatbotProps {\r\n    cropType?: string;\r\n    diseaseDetected?: string;\r\n}\r\n\r\nconst Chatbot: React.FC<ChatbotProps> = ({ cropType = 'tomato', diseaseDetected }) => {\r\n    const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n    const [input, setInput] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [suggestions, setSuggestions] = useState<string[]>([]);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Load suggestions on mount\r\n    useEffect(() => {\r\n        fetchSuggestions();\r\n    }, [cropType]);\r\n\r\n    // Scroll to bottom on new message\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages]);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    const fetchSuggestions = async () => {\r\n        try {\r\n            const res = await fetch(`/api/chatbot/suggestions?crop=${cropType}`);\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setSuggestions(data.data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching suggestions:', error);\r\n        }\r\n    };\r\n\r\n    const sendMessage = async (question: string) => {\r\n        if (!question.trim()) return;\r\n\r\n        // Add user message\r\n        const userMsg: ChatMessage = {\r\n            id: Date.now().toString(),\r\n            type: 'user',\r\n            content: question,\r\n            timestamp: new Date()\r\n        };\r\n        setMessages((prev) => [...prev, userMsg]);\r\n        setInput('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/chatbot/ask', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    question,\r\n                    cropType,\r\n                    diseaseDetected,\r\n                    confidence: 0.8\r\n                })\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (data.success && data.data.message) {\r\n                const botMsg: ChatMessage = {\r\n                    id: (Date.now() + 1).toString(),\r\n                    type: 'bot',\r\n                    content: data.data.message,\r\n                    timestamp: new Date(),\r\n                    confidence: data.data.confidence\r\n                };\r\n                setMessages((prev) => [...prev, botMsg]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error sending message:', error);\r\n            const errorMsg: ChatMessage = {\r\n                id: (Date.now() + 1).toString(),\r\n                type: 'bot',\r\n                content: 'âŒ Xin lá»—i, tÃ´i gáº·p sá»± cá»‘. Vui lÃ²ng thá»­ láº¡i sau.',\r\n                timestamp: new Date()\r\n            };\r\n            setMessages((prev) => [...prev, errorMsg]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSend = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        sendMessage(input);\r\n    };\r\n\r\n    const handleSuggestionClick = (suggestion: string) => {\r\n        sendMessage(suggestion);\r\n    };\r\n\r\n    return (\r\n        <div className=\"chatbot-widget\">\r\n            {/* Chat Button */}\r\n            <button\r\n                className=\"chat-toggle-btn\"\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                title=\"Má»Ÿ trá»£ lÃ½ AI\"\r\n            >\r\n                {isOpen ? 'âœ•' : 'ğŸ’¬'}\r\n            </button>\r\n\r\n            {/* Chat Window */}\r\n            {isOpen && (\r\n                <div className=\"chat-window\">\r\n                    <div className=\"chat-header\">\r\n                        <h3>ğŸ¤– Trá»£ lÃ½ nÃ´ng nghiá»‡p AI</h3>\r\n                        <button\r\n                            className=\"close-btn\"\r\n                            onClick={() => setIsOpen(false)}\r\n                            aria-label=\"Close\"\r\n                        >\r\n                            âœ•\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Messages Area */}\r\n                    <div className=\"chat-messages\">\r\n                        {messages.length === 0 ? (\r\n                            <div className=\"chat-welcome\">\r\n                                <p className=\"welcome-title\">ğŸ‘‹ Xin chÃ o!</p>\r\n                                <p className=\"welcome-text\">\r\n                                    TÃ´i lÃ  trá»£ lÃ½ nÃ´ng nghiá»‡p AI. TÃ´i cÃ³ thá»ƒ giÃºp báº¡n vá»›i:\r\n                                </p>\r\n                                <ul className=\"welcome-list\">\r\n                                    <li>ğŸŒ± CÃ¡ch chÄƒm sÃ³c cÃ¢y trá»“ng</li>\r\n                                    <li>ğŸ” Cháº©n Ä‘oÃ¡n bá»‡nh</li>\r\n                                    <li>ğŸ’Š PhÃ²ng chá»‘ng bá»‡nh</li>\r\n                                    <li>â˜€ï¸ á»¨ng phÃ³ thá»i tiáº¿t</li>\r\n                                </ul>\r\n                                <p className=\"welcome-hint\">\r\n                                    Báº¯t Ä‘áº§u báº±ng cÃ¡ch chá»n gá»£i Ã½ hoáº·c gÃµ cÃ¢u há»i cá»§a báº¡n\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                            messages.map((msg) => (\r\n                                <div key={msg.id} className={`chat-message ${msg.type}`}>\r\n                                    <div className=\"message-icon\">\r\n                                        {msg.type === 'user' ? 'ğŸ‘¨â€ğŸŒ¾' : 'ğŸ¤–'}\r\n                                    </div>\r\n                                    <div className=\"message-content\">\r\n                                        <p>{msg.content}</p>\r\n                                        {msg.confidence !== undefined && msg.type === 'bot' && (\r\n                                            <span className=\"message-confidence\">\r\n                                                Äá»™ tin cáº­y: {(msg.confidence * 100).toFixed(0)}%\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                        {loading && (\r\n                            <div className=\"chat-message bot loading-message\">\r\n                                <div className=\"message-icon\">ğŸ¤–</div>\r\n                                <div className=\"message-content\">\r\n                                    <div className=\"typing-indicator\">\r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        <span></span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div ref={messagesEndRef} />\r\n                    </div>\r\n\r\n                    {/* Suggestions */}\r\n                    {messages.length === 0 && suggestions.length > 0 && (\r\n                        <div className=\"chat-suggestions\">\r\n                            {suggestions.map((suggestion, idx) => (\r\n                                <button\r\n                                    key={idx}\r\n                                    className=\"suggestion-btn\"\r\n                                    onClick={() => handleSuggestionClick(suggestion)}\r\n                                    disabled={loading}\r\n                                >\r\n                                    {suggestion}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Input Area */}\r\n                    <form className=\"chat-input-form\" onSubmit={handleSend}>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"chat-input\"\r\n                            placeholder=\"Há»i tÃ´i vá» cÃ¢y cá»§a báº¡n...\"\r\n                            value={input}\r\n                            onChange={(e) => setInput(e.target.value)}\r\n                            disabled={loading}\r\n                        />\r\n                        <button type=\"submit\" className=\"send-btn\" disabled={loading || !input.trim()}>\r\n                            {loading ? 'â³' : 'ğŸ“¤'}\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chatbot;\r\n","import React, { useState } from 'react';\r\nimport ImageUploader from './components/ImageUploader';\r\nimport CropManagement from './components/CropManagement';\r\nimport Chatbot from './components/Chatbot';\r\nimport './styles/main.css';\r\n\r\nconst App: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<'prediction' | 'crops'>('prediction');\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"app-header\">\r\n        <h1>ğŸŒ¿ MÃ¡y DÃ² Bá»‡nh LÃ¡ CÃ¢y ThÃ´ng Minh</h1>\r\n        <p>Sá»­ dá»¥ng AI Ä‘á»ƒ phÃ¡t hiá»‡n bá»‡nh cÃ¢y trá»“ng tá»« hÃ¬nh áº£nh</p>\r\n      </header>\r\n\r\n      <nav className=\"app-nav\">\r\n        <button\r\n          className={`tab-btn ${activeTab === 'prediction' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('prediction')}\r\n        >\r\n          ğŸ“· PhÃ¢n tÃ­ch áº£nh\r\n        </button>\r\n        <button\r\n          className={`tab-btn ${activeTab === 'crops' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('crops')}\r\n        >\r\n          ğŸŒ± Quáº£n lÃ½ cÃ¢y\r\n        </button>\r\n      </nav>\r\n\r\n      <main className=\"app-main\">\r\n        {activeTab === 'prediction' && (\r\n          <div className=\"tab-content\">\r\n            <ImageUploader />\r\n          </div>\r\n        )}\r\n        {activeTab === 'crops' && (\r\n          <div className=\"tab-content\">\r\n            <CropManagement />\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      {/* Chatbot Widget */}\r\n      <Chatbot cropType=\"tomato\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/main.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}